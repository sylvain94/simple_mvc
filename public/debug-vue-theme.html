<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Vue Theme</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .debug-box { border: 1px solid #ccc; padding: 15px; margin: 10px 0; }
        button { padding: 10px 15px; margin: 5px; }
    </style>
</head>
<body>
    <h1>Debug Vue.js Theme System</h1>
    
    <div class="debug-box">
        <h2>Document HTML</h2>
        <p><strong>data-theme:</strong> <span id="data-theme">Non d√©fini</span></p>
        <p><strong>Classes:</strong> <span id="classes">Non d√©finies</span></p>
    </div>
    
    <div class="debug-box">
        <h2>localStorage</h2>
        <p><strong>theme:</strong> <span id="localStorage-theme">Non d√©fini</span></p>
        <button onclick="clearLocalStorage()">Clear localStorage</button>
    </div>
    
    <div class="debug-box">
        <h2>Tests manuels</h2>
        <button onclick="testTheme('light')">Set Light</button>
        <button onclick="testTheme('dark')">Set Dark</button>
        <button onclick="testTheme('auto')">Set Auto</button>
    </div>
    
    <div class="debug-box">
        <h2>Console Logs</h2>
        <div id="console-logs" style="background: #f0f0f0; padding: 10px; max-height: 200px; overflow-y: auto;"></div>
        <button onclick="clearLogs()">Clear Logs</button>
    </div>

    <script>
        function updateDisplay() {
            document.getElementById('data-theme').textContent = 
                document.documentElement.getAttribute('data-theme') || 'Non d√©fini';
            
            document.getElementById('classes').textContent = 
                document.documentElement.className || 'Non d√©finies';
            
            document.getElementById('localStorage-theme').textContent = 
                localStorage.getItem('theme') || 'Non d√©fini';
        }
        
        function testTheme(theme) {
            console.log(`üé® Testing theme: ${theme}`);
            localStorage.setItem('theme', theme);
            
            const effectiveTheme = theme === 'auto' 
                ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light')
                : theme;
            
            document.documentElement.setAttribute('data-theme', effectiveTheme);
            
            if (effectiveTheme === 'dark') {
                document.documentElement.classList.add('dark');
                document.documentElement.classList.remove('light');
            } else {
                document.documentElement.classList.add('light');
                document.documentElement.classList.remove('dark');
            }
            
            updateDisplay();
            addLog(`‚úÖ Theme set to: ${theme} (effective: ${effectiveTheme})`);
        }
        
        function clearLocalStorage() {
            localStorage.removeItem('theme');
            updateDisplay();
            addLog('üóëÔ∏è localStorage cleared');
        }
        
        function addLog(message) {
            const logs = document.getElementById('console-logs');
            const timestamp = new Date().toLocaleTimeString();
            logs.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            logs.scrollTop = logs.scrollHeight;
        }
        
        function clearLogs() {
            document.getElementById('console-logs').innerHTML = '';
        }
        
        // Override console.log to capture logs
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            addLog(args.join(' '));
        };
        
        // Initialize display
        updateDisplay();
        
        // Update every second
        setInterval(updateDisplay, 1000);
        
        addLog('üöÄ Debug script loaded');
    </script>
</body>
</html>
